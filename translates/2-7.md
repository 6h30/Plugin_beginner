2-7
### [Giáº£ng viÃªn]  
Giá» chÃºng ta Ä‘Ã£ biáº¿t cÃ¡ch chá»‰nh sá»­a mÃ´ hÃ¬nh Revit, hÃ£y cÃ¹ng há»c cÃ¡ch **táº¡o pháº§n tá»­ tá»« Ä‘áº§u**, báº¯t Ä‘áº§u vá»›i viá»‡c Ä‘áº·t má»™t **family dá»±a trÃªn Ä‘iá»ƒm**. TÃ´i Ä‘ang má»Ÿ file bÃ i táº­p Revit cho video nÃ y, vá»›i má»¥c tiÃªu Ä‘áº·t má»™t family bÃ n lÃ m viá»‡c (nhÆ° hÃ¬nh gÃ³c trÃ¡i) vÃ o dá»± Ã¡n.  

### **1. Lá»c FamilySymbol cáº§n dÃ¹ng**  
ChÃºng ta sáº½:  
1. Lá»c táº¥t cáº£ **FamilySymbol** (kiá»ƒu family) trong tÃ i liá»‡u.  
2. TÃ¬m family bÃ n cÃ³ tÃªn **"1,525 by 762 millimeters"** báº±ng cÃ¡ch so khá»›p tÃªn.  

#### **CÃ¡ch triá»ƒn khai trong Visual Studio:**  
- Má»Ÿ project file vÃ  táº¡o má»™t `IExternalCommand` má»›i tÃªn `PlaceFamily`.  
- Sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `NewFamilyInstance` (tÃ¬m trong **Object Browser**) Ä‘á»ƒ táº¡o family.  

```csharp
// Lá»c FamilySymbol tá»« tÃ i liá»‡u
FilteredElementCollector collector = new FilteredElementCollector(doc);
IList<Element> symbols = collector
    .OfClass(typeof(FamilySymbol)) // Lá»c theo lá»›p FamilySymbol
    .WhereElementIsElementType()   // Chá»‰ láº¥y kiá»ƒu, khÃ´ng pháº£i thá»ƒ hiá»‡n
    .ToElements();

// TÃ¬m family bÃ n cá»¥ thá»ƒ
FamilySymbol targetSymbol = null;
foreach (Element ele in symbols)
{
    if (ele.Name == "1,525 by 762 millimeters")
    {
        targetSymbol = ele as FamilySymbol;
        break;
    }
}
```

### **2. KÃ­ch hoáº¡t vÃ  Ä‘áº·t Family**  
- **Kiá»ƒm tra tráº¡ng thÃ¡i kÃ­ch hoáº¡t**: Revit cÃ³ thá»ƒ táº¯t `FamilySymbol` Ä‘á»ƒ tiáº¿t kiá»‡m bá»™ nhá»›.  
- **KÃ­ch hoáº¡t náº¿u cáº§n**: DÃ¹ng phÆ°Æ¡ng thá»©c `Activate()`.  

```csharp
using (Transaction trans = new Transaction(doc, "Place Family"))
{
    trans.Start();

    if (!targetSymbol.IsActive) // Náº¿u chÆ°a kÃ­ch hoáº¡t
        targetSymbol.Activate(); 

    // Äáº·t family táº¡i tá»a Ä‘á»™ (0, 0, 0)
    doc.Create.NewFamilyInstance(
        new XYZ(0, 0, 0),    // Äiá»ƒm Ä‘áº·t
        targetSymbol,         // FamilySymbol
        StructuralType.NonStructural // Loáº¡i káº¿t cáº¥u (khÃ´ng pháº£i káº¿t cáº¥u)
    );

    trans.Commit();
}
```

### **3. Giáº£i thÃ­ch chi tiáº¿t**  
- **`OfClass(typeof(FamilySymbol))`**: Lá»c cÃ¡c pháº§n tá»­ thuá»™c lá»›p `FamilySymbol`.  
- **`WhereElementIsElementType()`**: Chá»‰ láº¥y **kiá»ƒu family**, khÃ´ng láº¥y thá»ƒ hiá»‡n Ä‘Ã£ Ä‘áº·t trong model.  
- **`NewFamilyInstance`**:  
  - Tham sá»‘ `XYZ`: Tá»a Ä‘á»™ Ä‘áº·t family (x, y, z).  
  - `StructuralType.NonStructural`: XÃ¡c Ä‘á»‹nh family khÃ´ng pháº£i pháº§n tá»­ káº¿t cáº¥u.  

### **4. Kiá»ƒm thá»­**  
- **BÆ°á»›c 1**: Cháº¡y lá»‡nh **Debug** vÃ  má»Ÿ file bÃ i táº­p.  
- **BÆ°á»›c 2**: Gá»i lá»‡nh **Place Family**.  
- **Káº¿t quáº£**: Má»™t chiáº¿c bÃ n sáº½ xuáº¥t hiá»‡n táº¡i gá»‘c tá»a Ä‘á»™ **(0, 0, 0)**.  

### **á»¨ng dá»¥ng thá»±c táº¿**  
TÃ­nh nÄƒng nÃ y há»¯u Ã­ch khi cáº§n Ä‘áº·t **nhiá»u family cÃ¹ng lÃºc**, vÃ­ dá»¥:  
- DÃ£y cá»™t trong máº·t báº±ng.  
- Bá»‘ trÃ­ ná»™i tháº¥t tá»± Ä‘á»™ng.  

> **LÆ°u Ã½**:  
> - LuÃ´n dÃ¹ng **Transaction** khi táº¡o/thay Ä‘á»•i pháº§n tá»­.  
> - Kiá»ƒm tra `IsActive` Ä‘á»ƒ trÃ¡nh lá»—i khi Ä‘áº·t family.  

**ThÃ nh cÃ´ng!** ChÃºng ta Ä‘Ã£ biáº¿t cÃ¡ch tá»± Ä‘á»™ng hÃ³a viá»‡c Ä‘áº·t family vÃ o mÃ´ hÃ¬nh Revit. ğŸš€