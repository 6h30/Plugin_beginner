2-6
### [NgÆ°á»i dáº«n]  
Giá» chÃºng ta Ä‘Ã£ cÃ³ má»™t lá»‡nh trong dá»± Ã¡n cÃ³ thá»ƒ khá»Ÿi táº¡o transaction. HÃ£y sá»­ dá»¥ng nÃ³ Ä‘á»ƒ chá»‰nh sá»­a tÃ i liá»‡u báº±ng cÃ¡ch há»c cÃ¡ch **xÃ³a má»™t pháº§n tá»­**.  

### **1. TÃ¬m hiá»ƒu phÆ°Æ¡ng thá»©c Delete**  
Trong **Object Browser**, tÃ¬m kiáº¿m tá»« khÃ³a **"delete"**. PhÆ°Æ¡ng thá»©c cáº§n dÃ¹ng lÃ  **Delete** tá»« lá»›p **Document**:  
- **YÃªu cáº§u**: Äáº£m báº£o cÃ i Ä‘áº·t Browser Ä‘Ã£ báº­t **"Show Inherited Members"**.  
- **Chá»©c nÄƒng**: Nháº­n má»™t **ElementId** Ä‘á»ƒ xÃ³a pháº§n tá»­ tÆ°Æ¡ng á»©ng.  

### **2. Triá»ƒn khai lá»‡nh xÃ³a pháº§n tá»­**  
Sau khi báº¯t Ä‘áº§u transaction, thÃªm Ä‘oáº¡n code sau Ä‘á»ƒ xÃ³a pháº§n tá»­ Ä‘Æ°á»£c chá»n:  
```csharp
doc.Delete(obj.ElementId); // obj lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c chá»n
```  

### **3. ThÃªm há»™p thoáº¡i xÃ¡c nháº­n**  
Äá»ƒ Ä‘áº£m báº£o ngÆ°á»i dÃ¹ng muá»‘n xÃ³a, chÃºng ta sáº½ táº¡o **TaskDialog** vá»›i hai nÃºt **OK** (xÃ³a) vÃ  **Cancel** (há»§y):  

#### **CÃ¡ch thiáº¿t láº­p TaskDialog**  
```csharp
TaskDialog tdialog = new TaskDialog("Delete Element");  
tdialog.MainContent = "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a pháº§n tá»­ nÃ y?";  
tdialog.CommonButtons = TaskDialogCommonButtons.Ok | TaskDialogCommonButtons.Cancel;  
```  
- **Dáº¥u `|`** phÃ¢n tÃ¡ch cÃ¡c nÃºt, xÃ¡c Ä‘á»‹nh vá»‹ trÃ­ (OK bÃªn trÃ¡i, Cancel bÃªn pháº£i).  

#### **Xá»­ lÃ½ káº¿t quáº£**  
```csharp
if (tdialog.Show() == TaskDialogResult.Ok)  
{  
    trans.Commit(); // XÃ¡c nháº­n xÃ³a  
    TaskDialog.Show("Delete", obj.ElementId.ToString() + " Ä‘Ã£ bá»‹ xÃ³a.");  
}  
else  
{  
    trans.RollBack(); // Há»§y thao tÃ¡c  
    TaskDialog.Show("Delete", "Pháº§n tá»­ KHÃ”NG bá»‹ xÃ³a.");  
}  
```  

### **4. Kiá»ƒm thá»­**  
- **BÆ°á»›c 1**: Cháº¡y lá»‡nh Debug vÃ  má»Ÿ má»™t file má»›i.  
- **BÆ°á»›c 2**: Chá»n má»™t pháº§n tá»­ (vÃ­ dá»¥: máº·t cáº¯t - **Section**) vÃ  nháº¥n **OK** Ä‘á»ƒ xÃ³a.  
- **Káº¿t quáº£**:  
  - Náº¿u chá»n **OK**, pháº§n tá»­ sáº½ biáº¿n máº¥t vÃ  há»™p thoáº¡i thÃ´ng bÃ¡o **"ElementId Ä‘Ã£ bá»‹ xÃ³a"**.  
  - Náº¿u chá»n **Cancel**, transaction sáº½ **RollBack** vÃ  pháº§n tá»­ Ä‘Æ°á»£c giá»¯ nguyÃªn.  

### **5. LÆ°u Ã½ quan trá»ng**  
- **Transactions lÃ  báº¯t buá»™c** khi thay Ä‘á»•i mÃ´ hÃ¬nh.  
- **LuÃ´n Ä‘Ã³ng transaction** (dÃ¹ng `Commit` hoáº·c `RollBack`) Ä‘á»ƒ trÃ¡nh lá»—i.  
- **Undo/Redo**: TÃªn transaction ("Delete Element") sáº½ xuáº¥t hiá»‡n trong menu Undo cá»§a Revit.  

> âœ… **ThÃ nh cÃ´ng!** ChÃºng ta Ä‘Ã£ táº¡o má»™t lá»‡nh an toÃ n Ä‘á»ƒ xÃ³a pháº§n tá»­, kÃ¨m xÃ¡c nháº­n tá»« ngÆ°á»i dÃ¹ng. Trong suá»‘t khÃ³a há»c, transaction sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng liÃªn tá»¥c cho má»i thay Ä‘á»•i mÃ´ hÃ¬nh.  

**Máº¹o**: Báº¡n cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng cáº¥u trÃºc nÃ y cho cÃ¡c lá»‡nh khÃ¡c (di chuyá»ƒn, chá»‰nh sá»­a tham sá»‘...). ğŸ› ï¸