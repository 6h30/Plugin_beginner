2-1
[Giảng viên] Khi làm việc với mô hình Revit, chúng ta thường xây dựng mọi thứ từ các đối tượng khác nhau như tường, đồ nội thất, sàn và cửa sổ. Tất cả các đối tượng này trong Revit đều bắt nguồn từ một lớp cơ sở trong Revit API được gọi là lớp phần tử (element class). Do đó, một dự án Revit về cơ bản là một tập hợp các phần tử khác nhau. Để có thể tìm kiếm và xác định các phần tử mà chúng ta đang làm việc, chúng ta cần hiểu một số cách phân loại chúng. Bốn trong số các cách phân loại này là theo danh mục (category), họ (family), ký hiệu (symbol) hoặc thể hiện (instance).  

Trong Revit API, các phần tử có một thuộc tính lưu trữ danh mục mà nó thuộc về, và điều này được sử dụng để xác định loại phần tử đó. Do đó, danh mục mô tả một nhóm các phần tử tương đồng mà loại phần tử đó được liên kết. Ví dụ, tất cả các bức tường sẽ thuộc danh mục tường (walls category) và tất cả các cửa sẽ thuộc danh mục cửa (door category). Mỗi BuiltInCategory trong Revit (là danh mục mặc định) sẽ có một kiểu liệt kê BuiltInCategory tương ứng. Vì vậy, danh mục tường có thể được truy xuất thông qua BuiltInCategory của nó, chúng ta sẽ xem xét chi tiết hơn trong các video sắp tới.  

Các phần tử cũng có thể được phân loại theo họ (family) mà chúng thuộc về. Các họ là các lớp phần tử được nhóm lại trong các danh mục khác nhau và thường được nhóm theo công dụng, thông số và hình dáng chung. Trong Revit API, có hai loại họ:  
- **Họ hệ thống (System families)**: Thường được tích hợp sẵn, chẳng hạn như tường.  
- **Họ thành phần (Component families)**: Thường được tạo bên ngoài và đưa vào dự án, chẳng hạn như đồ nội thất.  

Do đó, các phần tử có thể được xác định bởi họ mà chúng thuộc về. Một họ sau đó được biểu diễn bằng một tập hợp các ký hiệu họ (family symbols) hoặc kiểu họ (family types) khác nhau, mỗi loại có một bộ thiết lập riêng. Ví dụ, chúng ta có thể có một họ tường cơ bản trong dự án, từ đó nhiều ký hiệu họ khác nhau được tạo ra. Trong Revit, chúng ta thường gọi chúng là kiểu họ (family types) và sử dụng các kiểu họ này để tạo ra các phiên bản khác nhau của một họ.  

Vì vậy, trong API, chúng ta có thể truy xuất các phần tử theo kiểu họ hoặc ký hiệu họ của chúng. Một thể hiện họ (family instance) đơn giản là một đối tượng được xây dựng trong mô hình Revit của một ký hiệu họ hoặc kiểu họ cụ thể. Việc truy cập vào các danh mục phần tử và kiểu phần tử khác nhau cho phép chúng ta phân biệt giữa các phần tử trong tệp dự án, đặc biệt khi lọc và truy cập các phần tử khác nhau.  

Bây giờ, hãy quay lại Visual Studio và xem cách truy xuất một phần tử từ ID phần tử của nó, sau đó chúng ta có thể truy xuất tất cả thông tin chi tiết của nó. Trong bài tập trước, chúng ta đã truy xuất ID phần tử của một phần tử được chọn. Bây giờ, hãy xem cách truy xuất chính phần tử đó. Chúng ta có thể làm điều này bằng phương thức **GetElement** từ tài liệu dự án. Hãy xem phương thức này trong **Object Browser** bằng cách chuyển đến tab **Object Browser**. Nếu bạn chưa mở nó, bạn có thể truy cập bằng cách nhấp đúp vào **Revit API Reference** và sau đó tìm kiếm **GetElement**. Như bạn có thể thấy ở trên cùng, có ba phương thức **GetElement** bị quá tải (overloaded), nghĩa là chúng giống nhau nhưng mỗi phương thức nhận một tham số khác nhau. Chúng ta có thể cung cấp một **ElementId**, **Reference** hoặc **string** (định danh duy nhất của phần tử). Một thuộc tính khác cũng có thể được sử dụng để xác định phần tử.  

Khi chúng ta truy xuất phần tử từ tài liệu Revit dưới dạng tham chiếu, chúng ta có thể sử dụng nó để lấy đối tượng phần tử. Hãy sử dụng phương thức **GetElement** nhận **ElementId** để thực hiện tác vụ mà chúng ta sẽ phải thực hiện khá thường xuyên trong API.  

Trước tiên, chúng ta cần lấy tài liệu (document), vì phương thức **GetElement** được truy cập từ đối tượng này. Hiện tại ở dòng 18, chúng ta đã gán **active UI doc** từ ứng dụng. Chúng ta có thể sử dụng nó để truy xuất tài liệu bằng cách truy cập thuộc tính **Document** trên đối tượng **UIDocument**. Vì vậy, hãy tạo một biến **Document** có tên **doc** và gán cho nó tài liệu hiện tại bằng cách sử dụng **uidoc.Document**.  

Giờ chúng ta có thể truy xuất phần tử từ tài liệu bằng **ElementId** và phương thức **GetElement** mà chúng ta vừa xem xét. Sau khi chọn đối tượng, hãy tạo một biến **ElementId** có tên **eleId**, và như chúng ta đã làm trong video trước, chúng ta có thể truy xuất thuộc tính **ElementId** từ đối tượng tham chiếu được lưu trong biến **obj**.  

Bây giờ, sử dụng **ElementId** này, chúng ta có thể truy xuất đối tượng đã chọn dưới dạng một phần tử. Để làm điều này, hãy tạo một biến **Element** có tên **ele** và gán cho nó phần tử bằng cách truy cập phương thức **GetElement** từ tài liệu được lưu trong **doc**, và với tham số là **eleId**.  

Tuyệt vời! Bây giờ chúng ta đã học cách truy xuất một phần tử bằng **ElementId**, hãy xem cách trích xuất tất cả thông tin từ phần tử đó.