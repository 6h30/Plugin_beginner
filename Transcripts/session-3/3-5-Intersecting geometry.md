kịch bản video hướng dẫn từng bước — trình bày dạng video tutorial có thoại, từng bước rõ ràng, kết hợp phần hình ảnh minh họa , với nội dung sau: 
3-5-
Intersecting geometry
Selecting transcript lines in this section will navigate to timestamp in the video
- [Instructor] We now know how to extract geometry from a Revit element, so let's look at one way that we can use geometry, and that is by calculating intersections. We can do this by using the element intersect solid filter. This is a slow filter that takes a solid as the parameter. This can be useful for finding clashes in a model. So using this filter, let's create a new command, that allows us to select a column family, to check if it intersects with a roof. In here, it let's the user select the object, and then retrieves the element from that object, and then the geometry from that element. I then created a solid variable, named gSolid which equals null. We'll use this to assign a solitary, that we extract from the column family. I've kept it outside of the for each loop, because we'll need to use it later on, with the collector that I've created down below. So, as we'll be selecting a column family, we need to retrieve the solid, which makes up the family column, by getting the geometry instance, as we have learned in an earlier video. So, inside of the for each loop, let's cast the geometry object to a geometry instance. To do that, let's create a geometry instance variable named gInst, and referring to that gobj, as geometry instance. We can now retrieve the geometry element, contained within the geometry instance. To make sure that we've got a geometry instance, let's first check if gInst does not equal null. If it's not null, it means we have a geometry instance. To extract the geometry element from the geometry instance, we need to use the get instance geometry method. This method is contained in the geometry instance class. So let's create a geometry element variable, named gle, and we're referring to that a call to the get instance geometry method from the geometry instance object, which is gInst dot get instance geometry. Now that we have the geometry element, we can loop over it like we did in the last video, and retrieve the solid. It says create a for each loop for geometry object, as go in gle, and within this loop, let's cast go as a solid, and we'll assign it to the gSolid variable. Perfect, we now have the solid from the column family. Next, we need to create the filter, which we'll use that solid for. So, after the filtered element collector, let's create an element intersects solid filter, and we'll call that filter, which will be in the element intersects solid filter. For the parameter, we use gSolid, and now we can apply that to our collector. As it's a slow filter, let's add in a quick filter first to make it faster. As we're finding intersections with roofs, let's add the shortcut of category. Using the built-in category, OST, roofs, then we can add our where passes method using the filter as the parameter, and finally, let's retrieve the intersecting elements as element ids, as that will return an I collection of element ids. Let's make sure we add in an I collection of element ids, named intersects, which we'll assign that collector to. Great, so we have now got the elements, that intersect with the column. To show this to the user, let's try adding the elements to the user selection. We can do that by accessing the set element ids from the selection class in the UI document. So let's access UI doc dot selection dot set element ids. This takes an I collection of element ids, which we already have stored on the intersects. So let's simply add intersects as the parameter. Great, so our command lets us select a family element, from which it'll then retrieve the geometry from that element, and it will check if it intersects with any roofs. It'll then return the intersecting elements, back as a selection. I've already gone ahead and added this into the manifest file. So, let's go straight ahead and try debugging the command. Now, let's open the Revit exercise file, associated with this video, and you can see this opens up to a 3D View. Let's go ahead and try our new command, which is called element intersection, and then select the column in the project. Perfect, so it looks liked it's worked as intended. You can see that the intersecting element, the roof, has been added to our selection. This can be very handy not just for checking for clashes, but for checking how one element interacts with another.